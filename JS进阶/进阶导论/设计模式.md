## è®¾è®¡æ¨¡å¼

> æ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„è§£å†³æ–¹æ¡ˆçš„æ ¸å¿ƒã€‚è¿™æ ·ï¼Œä½ å°±èƒ½ä¸€æ¬¡åˆä¸€æ¬¡åœ°ä½¿ç”¨è¯¥æ–¹æ¡ˆè€Œä¸å¿…åšé‡å¤åŠ³åŠ¨ã€‚ â€”â€” Christopher Alexander

### SOLID åŽŸåˆ™ï¼š

> "SOLID" æ˜¯ç”±ç½—ä¼¯ç‰¹Â·CÂ·é©¬ä¸åœ¨ 21 ä¸–çºªæ—©æœŸå¼•å…¥çš„è®°å¿†æœ¯é¦–å­—æ¯ç¼©ç•¥å­—ï¼ŒæŒ‡ä»£äº†é¢å‘å¯¹è±¡ç¼–ç¨‹å’Œé¢å‘å¯¹è±¡è®¾è®¡çš„äº”ä¸ªåŸºæœ¬åŽŸåˆ™ã€‚

1. å•ä¸€åŠŸèƒ½åŽŸåˆ™ï¼ˆSingle Responsibility Principleï¼‰
2. å¼€æ”¾å°é—­åŽŸåˆ™ï¼ˆOpened Closed Principleï¼‰ï¼šå¯¹æ‹“å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­ã€‚
3. é‡Œå¼æ›¿æ¢åŽŸåˆ™ï¼ˆLiskov Substitution Principleï¼‰
4. æŽ¥å£éš”ç¦»åŽŸåˆ™ï¼ˆInterface Segregation Principleï¼‰
5. ä¾èµ–åè½¬åŽŸåˆ™ï¼ˆDependency Inversion Principleï¼‰

**è®¾è®¡æ¨¡å¼çš„æ ¸å¿ƒæ€æ˜¯ï¼šå°è£…å˜åŒ–** æˆ‘ä»¬å°†å˜æ¢é€ æˆçš„å½±å“ **æœ€å°åŒ–**ï¼Œå°†å˜ä¸Žä¸å˜è¿›è¡Œåˆ†ç¦»ï¼Œç¡®ä¿å˜åŒ–çš„éƒ¨åˆ†çµæ´»å³ï¼šä¸ªæ€§ï¼Œä¸å˜çš„éƒ¨åˆ†ç¨³å®šå³ï¼šå…±æ€§ã€‚è€Œè¿™ä¸ªè¿‡ç¨‹å°±æ˜¯ **å°è£…å˜åŒ–**ã€‚

ðŸŒˆ **ç®€å•å·¥åŽ‚ï¼š** å°†åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹å•ç‹¬å°è£…ã€‚

> ðŸŒ° è¦æ±‚ä¸€ä¸ªç³»ç»Ÿå…·å¤‡ç»™ä¸åŒå·¥ç§åˆ†é…èŒè´£è¯´æ˜Žçš„åŠŸèƒ½ã€‚

```js
function User(name , age, career, work) {
    this.name = name
    this.age = age
    this.career = career
    this.work = work
}

function Factory(name, age, career) {
    let work
    switch(career) {
        case 'coder':
            work =  ['å†™ä»£ç ','å†™ç³»åˆ†', 'ä¿®Bug']
            break
        case 'product manager':
            work = ['è®¢ä¼šè®®å®¤', 'å†™PRD', 'å‚¬æ›´']
            break
        case 'boss':
            work = ['å–èŒ¶', 'çœ‹æŠ¥', 'è§å®¢æˆ·']
        case 'xxx':
            // å…¶å®ƒå·¥ç§çš„èŒè´£åˆ†é…
            ...

    return new User(name, age, career, work)
}
// æˆ‘ä»¬æ€è€ƒä¸€ä¸‹è¿™é‡Œçš„å˜ä¸Žä¸å˜åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ
1. å…±æ€§ï¼š  nameã€ageã€careerã€work
2. ä¸ªæ€§ï¼š  å–å€¼ä¸åŒ

// é€šè¿‡åˆ†æžç„¶åŽä»¥è¿™æ ·çš„æ–¹å¼è¿›è¡Œå®žçŽ°ï¼Œæˆ‘ä»¬è¦è€ƒè™‘çš„äº‹æƒ…å°±ä¼šç®€å•å¾ˆå¤šï¼Œæˆ–è®¸ä½ ä¼šå†™å‡ºè¿™æ ·çš„ä»£ç ï¼š

function Factory(name, age, career) {
    switch(career) {
        case 'coder':
            return new Coder(name, age)
            break
        case 'product manager':
            return new ProductManager(name, age)
            break
        ...
}

// è¿™æ ·ï¼Œé‚£æˆ‘ä»¬æ˜¯å¦æ¯å¾—åˆ°ä¸€æ¡æ•°æ®éƒ½è¦åŽ»åˆ¤æ–­å‘˜å·¥çš„å·¥ç§ï¼Œå¹¶åŽ»ä¸ºæ¯ä¸€ä¸ªå·¥ç§åˆ†é…ä¸€ä¸ªæž„é€ å™¨å‘¢ï¼Ÿ
```

ðŸŒˆ **æŠ½è±¡å·¥åŽ‚ï¼š**

ðŸŒˆ **å•ä¾‹æ¨¡å¼ï¼š** ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®žä¾‹

> é€šä¿—ç‚¹è®²å°±æ˜¯ï¼Œä¸ç®¡å°è¯•å¤šå°‘æ¬¡çš„åˆ›å»ºï¼Œéƒ½åªä¼šè¿”å›žç¬¬ä¸€æ¬¡åˆ›å»ºé‚£å”¯ä¸€çš„ä¸€ä¸ªå®žä¾‹ï¼›æŽ¥ä¸‹æ¥å®žçŽ°ä¸€ä¸‹ï¼š

```js
class SingleDog {
  show() {
    console.log("æˆ‘æ˜¯ä¸€ä¸ªå•ä¾‹å¯¹è±¡");
  }
  static getInstance() {
    // åˆ¤æ–­æ˜¯å¦å·²ç»newè¿‡1ä¸ªå®žä¾‹
    if (!SingleDog.instance) {
      // è‹¥è¿™ä¸ªå”¯ä¸€çš„å®žä¾‹ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆå…ˆåˆ›å»ºå®ƒ
      SingleDog.instance = new SingleDog();
    }
    // å¦‚æžœè¿™ä¸ªå”¯ä¸€çš„å®žä¾‹å·²ç»å­˜åœ¨ï¼Œåˆ™ç›´æŽ¥è¿”å›ž
    return SingleDog.instance;
  }
}

const s1 = SingleDog.getInstance();
const s2 = SingleDog.getInstance();

// true
s1 === s2;

// é™¤äº†æ¥¼ä¸Šè¿™ç§å®žçŽ°æ–¹å¼ä¹‹å¤–ï¼ŒgetInstanceçš„é€»è¾‘è¿˜å¯ä»¥ç”¨é—­åŒ…æ¥å®žçŽ°ï¼š

SingleDog.getInstance = (function () {
  // å®šä¹‰è‡ªç”±å˜é‡instanceï¼Œæ¨¡æ‹Ÿç§æœ‰å˜é‡
  let instance = null;
  return function () {
    // åˆ¤æ–­è‡ªç”±å˜é‡æ˜¯å¦ä¸ºnull
    if (!instance) {
      // å¦‚æžœä¸ºnullåˆ™newå‡ºå”¯ä¸€å®žä¾‹
      instance = new SingleDog();
    }
    return instance;
  };
})();
```

**âœ¨ ç†è§£ Vuex ä¸­çš„ Storeï¼š** [https://vuex.vuejs.org/zh/]: Vuex å®˜æ–¹æ–‡æ¡£

> Vuex ä½¿ç”¨å•ä¸€çŠ¶æ€æ ‘ï¼Œç”¨ä¸€ä¸ªå¯¹è±¡å°±åŒ…å«äº†å…¨éƒ¨çš„åº”ç”¨å±‚çº§çŠ¶æ€ã€‚è‡³æ­¤å®ƒä¾¿ä½œä¸ºä¸€ä¸ªâ€œå”¯ä¸€æ•°æ®æº (SSOT)â€è€Œå­˜åœ¨ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œæ¯ä¸ªåº”ç”¨å°†ä»…ä»…åŒ…å«ä¸€ä¸ª store å®žä¾‹ã€‚å•ä¸€çŠ¶æ€æ ‘è®©æˆ‘ä»¬èƒ½å¤Ÿç›´æŽ¥åœ°å®šä½ä»»ä¸€ç‰¹å®šçš„çŠ¶æ€ç‰‡æ®µï¼Œåœ¨è°ƒè¯•çš„è¿‡ç¨‹ä¸­ä¹Ÿèƒ½è½»æ˜“åœ°å–å¾—æ•´ä¸ªå½“å‰åº”ç”¨çŠ¶æ€çš„å¿«ç…§ã€‚ â€”â€”Vuex å®˜æ–¹æ–‡æ¡£

â— æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ Vuex å¦‚ä½•ç¡®ä¿å”¯ä¸€æ€§ï¼š

- vuex æ’ä»¶æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œä»–åœ¨å†…éƒ¨å®žçŽ°äº†ä¸€ä¸ª install æ–¹æ³•ï¼Œåœ¨æ’ä»¶å®‰è£…æ˜¯ä¼šè¢«è°ƒç”¨ï¼Œä»Žè€Œå®žçŽ°åœ¨ Vue çš„å®žä¾‹ä¸­æ³¨å…¥ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯ install ä¸€æ¬¡ï¼Œéƒ½ä¼šå°è¯•ç»™ Vue å®žä¾‹æ³¨å…¥ä¸€ä¸ª Storeã€‚

```js
let Vue // è¿™ä¸ªVueçš„ä½œç”¨å’Œæ¥¼ä¸Šçš„instanceä½œç”¨ä¸€æ ·
...

export function install (_Vue) {
  // åˆ¤æ–­ä¼ å…¥çš„Vueå®žä¾‹å¯¹è±¡æ˜¯å¦å·²ç»è¢«installè¿‡Vuexæ’ä»¶ï¼ˆæ˜¯å¦æœ‰äº†å”¯ä¸€çš„stateï¼‰
  if (Vue && _Vue === Vue) {
    if (process.env.NODE_ENV !== 'production') {
      console.error(
        '[vuex] already installed. Vue.use(Vuex) should be called only once.'
      )
    }
    return
  }
  // è‹¥æ²¡æœ‰ï¼Œåˆ™ä¸ºè¿™ä¸ªVueå®žä¾‹å¯¹è±¡installä¸€ä¸ªå”¯ä¸€çš„Vuex
  Vue = _Vue
  // å°†Vuexçš„åˆå§‹åŒ–é€»è¾‘å†™è¿›Vueçš„é’©å­å‡½æ•°é‡Œ
  applyMixin(Vue)
}

// å•ä¾‹çš„æ„ä¹‰åœ¨äºŽï¼šå½“æˆ‘ä»¬åœ¨ä¸çŸ¥æƒ…ä¸æ³¨æ„çš„æƒ…å†µä¸‹å¤šæ¬¡æ³¨å†Œäº†æ–°çš„Storeï¼Œé‚£ä¹ˆåœ¨ä¸¤æ¬¡æ³¨å†Œä¹‹é—´æ‰€å­˜å‚¨çš„æ•°æ®éƒ½ä¼šä¸¢å¤±
```

ðŸ”” é€šè¿‡ä»¥ä¸Šçš„ç†è§£æ¥å®žçŽ°ä¸€ä¸ª **Storage**

- å®žçŽ° Storageï¼Œä½¿å¾—è¯¥å¯¹è±¡ä¸ºå•ä¾‹ï¼ŒåŸºäºŽ localStorage è¿›è¡Œå°è£…ã€‚å®žçŽ°æ–¹æ³• setItem(key,value) å’Œ getItem(key)ã€‚

```js
// é™æ€ç‰ˆ
class Storage(){
	static getInstance(){
		if(!Storage.instance){
			Storage.instance = new Storage()
		}
		return Storage.instance
	}

	getItem(key){
		return localStorage.getItem(key)
	}

	setItem(key, vlaue){
		return localStorage.setItem(key, value)
	}
}

// é—­åŒ…ç‰ˆ
// â“ æˆ‘ä»¬åœ¨åˆ©ç”¨ä¸Šè¾¹å®žçŽ°çš„æ–¹å¼å¦‚ä½•æ¥ä½¿å®žä¾‹å¯ä»¥æœ‰ get å’Œ set çš„æ–¹æ³•å‘¢ï¼Ÿ
// 		åº”è¯¥è‡ªç„¶è€Œç„¶çš„æƒ³åˆ°å°†è¿™ä¸¤ä¸ªæ–¹æ³•æ”¾åœ¨æž„é€ å‡½æ•°çš„åŽŸåž‹é“¾ä¸Šï¼›
function StorageBase(){}
StorageBase.prototype.getItem = (key) => localStorage.getItem(key)
StorgaeBase.prototype.setItem = (key, value) => localStorage.setItem(key, value)

const Storage = (function(){
	let instacne = null
	if(!instance){
		instance = new StorageBase()
	}
	return instance
})()
```
